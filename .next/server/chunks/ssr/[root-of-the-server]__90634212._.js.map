{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ctas\": \"page-module___8aEwW__ctas\",\n  \"footer\": \"page-module___8aEwW__footer\",\n  \"loginBtn\": \"page-module___8aEwW__loginBtn\",\n  \"loginForm\": \"page-module___8aEwW__loginForm\",\n  \"loginTbx\": \"page-module___8aEwW__loginTbx\",\n  \"logo\": \"page-module___8aEwW__logo\",\n  \"main\": \"page-module___8aEwW__main\",\n  \"page\": \"page-module___8aEwW__page\",\n  \"primary\": \"page-module___8aEwW__primary\",\n  \"promoBadge\": \"page-module___8aEwW__promoBadge\",\n  \"promoBadgeContainer\": \"page-module___8aEwW__promoBadgeContainer\",\n  \"promoCard\": \"page-module___8aEwW__promoCard\",\n  \"promoDescription\": \"page-module___8aEwW__promoDescription\",\n  \"promoPartner\": \"page-module___8aEwW__promoPartner\",\n  \"promoRedeem\": \"page-module___8aEwW__promoRedeem\",\n  \"promoRedeemContainer\": \"page-module___8aEwW__promoRedeemContainer\",\n  \"secondary\": \"page-module___8aEwW__secondary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/winitwitchayanrat/Codes/LookLook/looklook-frontend/src/app/utils/jwt.ts"],"sourcesContent":["import jwt from 'jsonwebtoken';\nimport { Cookie } from 'cookie';\n\nexport type JwtPayload = {\n  userId: string;\n  username: string;\n  iat?: number;\n  exp?: number;\n};\n\nexport function parseAuthCookie(cookieHeader: string | undefined): string | null {\n  if (!cookieHeader) return null;\n  const cookies = Cookie.parse(cookieHeader);\n  return cookies.authToken || null;\n}\n\nexport function verifyJwt(token: string): JwtPayload | null {\n  try {\n    return jwt.verify(token, process.env.JWT_SECRET!) as JwtPayload;\n  } catch (error) {\n    console.error('JWT verification failed:', error);\n    return null;\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AASO,SAAS,gBAAgB,YAAgC;IAC9D,IAAI,CAAC,cAAc,OAAO;IAC1B,MAAM,UAAU,uIAAA,CAAA,SAAM,CAAC,KAAK,CAAC;IAC7B,OAAO,QAAQ,SAAS,IAAI;AAC9B;AAEO,SAAS,UAAU,KAAa;IACrC,IAAI;QACF,OAAO,qIAAA,CAAA,UAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU;IACjD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/winitwitchayanrat/Codes/LookLook/looklook-frontend/src/app/promotion/page.tsx"],"sourcesContent":["import styles from \"../page.module.css\";\nimport moment from \"moment\";\nimport { NextResponse } from 'next/server';\nimport { parseAuthCookie, verifyJwt } from '../utils/jwt';\n\n\nexport default async function PromoPage() {\n   // Get the Cookie from the request headers (server components can access the request object)\n  const token = parseAuthCookie(Headers.get('cookie'));\n  const payload = token? verifyJwt(token) : null;\n\n  if (!payload) {\n    // Theoretically, the middleware has intercepted it, but edge cases need to be handled (such as the token expiring during the request)\n    return NextResponse.redirect(new URL('/login', request.url));\n  }\n  \n  const data = await fetch('http://localhost:3000/promotions')\n  const promotions = await data.json()\n\n  return (\n    <div className={styles.page}>\n      <main className={styles.main}>\n        <div>\n          <h1>{payload}</h1>\n          <h1>Available Promotions</h1>\n          {promotions.map(promotion => (\n            <div key={promotion.promoId} className={styles.promoCard}>\n              <h2>{promotion.title}</h2>\n                <div className={styles.promoBadgeContainer}>\n                  {\n                    promotion.types.map(promoType=>(\n                      <div key={promoType} className={styles.promoBadge}>\n                        {promoType}\n                      </div>\n                    ))\n                  }\n                </div>\n                <div className={styles.promoDescription}>{promotion.description}</div>\n                <div className={styles.promoPartner}>By {promotion.partners}</div>\n                <div>From {moment(promotion.start).format('DD/MM/YYYY HH:mm:ss')}</div>\n                <div>To {moment(promotion.end).format('DD/MM/YYYY HH:mm:ss')}</div>\n                <div className={styles.promoRedeemContainer}>\n                  <button className={styles.promoRedeem}>Redeem</button>\n                </div>\n            </div>\n          ))}\n        </div>\n      </main>\n      <footer className={styles.footer}>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAGe,eAAe;IAC3B,4FAA4F;IAC7F,MAAM,QAAQ,CAAA,GAAA,0HAAA,CAAA,kBAAe,AAAD,EAAE,QAAQ,GAAG,CAAC;IAC1C,MAAM,UAAU,QAAO,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE,SAAS;IAE1C,IAAI,CAAC,SAAS;QACZ,sIAAsI;QACtI,OAAO,8HAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,QAAQ,GAAG;IAC5D;IAEA,MAAM,OAAO,MAAM,MAAM;IACzB,MAAM,aAAa,MAAM,KAAK,IAAI;IAElC,qBACE,8OAAC;QAAI,WAAW,8HAAA,CAAA,UAAM,CAAC,IAAI;;0BACzB,8OAAC;gBAAK,WAAW,8HAAA,CAAA,UAAM,CAAC,IAAI;0BAC1B,cAAA,8OAAC;;sCACC,8OAAC;sCAAI;;;;;;sCACL,8OAAC;sCAAG;;;;;;wBACH,WAAW,GAAG,CAAC,CAAA,0BACd,8OAAC;gCAA4B,WAAW,8HAAA,CAAA,UAAM,CAAC,SAAS;;kDACtD,8OAAC;kDAAI,UAAU,KAAK;;;;;;kDAClB,8OAAC;wCAAI,WAAW,8HAAA,CAAA,UAAM,CAAC,mBAAmB;kDAEtC,UAAU,KAAK,CAAC,GAAG,CAAC,CAAA,0BAClB,8OAAC;gDAAoB,WAAW,8HAAA,CAAA,UAAM,CAAC,UAAU;0DAC9C;+CADO;;;;;;;;;;kDAMhB,8OAAC;wCAAI,WAAW,8HAAA,CAAA,UAAM,CAAC,gBAAgB;kDAAG,UAAU,WAAW;;;;;;kDAC/D,8OAAC;wCAAI,WAAW,8HAAA,CAAA,UAAM,CAAC,YAAY;;4CAAE;4CAAI,UAAU,QAAQ;;;;;;;kDAC3D,8OAAC;;4CAAI;4CAAM,CAAA,GAAA,gIAAA,CAAA,UAAM,AAAD,EAAE,UAAU,KAAK,EAAE,MAAM,CAAC;;;;;;;kDAC1C,8OAAC;;4CAAI;4CAAI,CAAA,GAAA,gIAAA,CAAA,UAAM,AAAD,EAAE,UAAU,GAAG,EAAE,MAAM,CAAC;;;;;;;kDACtC,8OAAC;wCAAI,WAAW,8HAAA,CAAA,UAAM,CAAC,oBAAoB;kDACzC,cAAA,8OAAC;4CAAO,WAAW,8HAAA,CAAA,UAAM,CAAC,WAAW;sDAAE;;;;;;;;;;;;+BAhBnC,UAAU,OAAO;;;;;;;;;;;;;;;;0BAsBjC,8OAAC;gBAAO,WAAW,8HAAA,CAAA,UAAM,CAAC,MAAM;;;;;;;;;;;;AAItC","debugId":null}}]
}