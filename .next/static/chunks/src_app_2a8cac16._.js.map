{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/page.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"ctas\": \"page-module___8aEwW__ctas\",\n  \"footer\": \"page-module___8aEwW__footer\",\n  \"loginBtn\": \"page-module___8aEwW__loginBtn\",\n  \"loginForm\": \"page-module___8aEwW__loginForm\",\n  \"loginTbx\": \"page-module___8aEwW__loginTbx\",\n  \"logo\": \"page-module___8aEwW__logo\",\n  \"main\": \"page-module___8aEwW__main\",\n  \"page\": \"page-module___8aEwW__page\",\n  \"primary\": \"page-module___8aEwW__primary\",\n  \"promoBadge\": \"page-module___8aEwW__promoBadge\",\n  \"promoBadgeContainer\": \"page-module___8aEwW__promoBadgeContainer\",\n  \"promoCard\": \"page-module___8aEwW__promoCard\",\n  \"promoDescription\": \"page-module___8aEwW__promoDescription\",\n  \"promoPartner\": \"page-module___8aEwW__promoPartner\",\n  \"promoRedeem\": \"page-module___8aEwW__promoRedeem\",\n  \"promoRedeemContainer\": \"page-module___8aEwW__promoRedeemContainer\",\n  \"secondary\": \"page-module___8aEwW__secondary\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/winitwitchayanrat/Codes/LookLook/looklook-frontend/src/app/promotion/page.tsx"],"sourcesContent":["'use client'\nimport styles from \"../page.module.css\";\nimport Cookies from 'js-cookie';\nimport { useEffect, useState } from 'react';\nimport { useRouter, redirect } from 'next/navigation';\nimport moment from \"moment\";\n\nexport default function PromoPage() {\n  const [promotion, setPromotion] = useState(null);\n  const router = useRouter()\n\n  useEffect(() => {\n    const token = Cookies.get('token')\n\n    if (!token) {\n      redirect('/login')\n      return\n    }\n\n    const validateToken = async () => {\n      try {\n        const res = await fetch('http://localhost:3000/promotions', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n\n        if (!res.ok) throw new Error('Token validation failed')\n      } catch (error) {\n        console.error(error)\n        router.push('/login') // Redirect to login if token validation fails\n      }\n    }\n\n    validateToken()\n  }, [router])\n\n  useEffect(() => {\n    const token = Cookies.get('token')\n\n    const fetchData = async () => {\n      const response = await fetch('http://localhost:3000/promotions/available', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n      const data = await response.json();\n      setPromotion(data);\n    };\n    fetchData();\n  });\n\n  function handleClick(id) {\n    const token = Cookies.get('token')\n\n    const fetchData = async () => {\n      const response = await fetch(`http://localhost:3000/users/redeem/${id}`, {\n        method: 'post',\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        })\n    };\n    fetchData();\n  }\n\n  if(promotion) {\n    return (\n    <div className={styles.page}>\n      <main className={styles.main}>\n        <div>\n          <h1>Available Promotions</h1>\n          {promotion.map(promotion => (\n            <div key={promotion.promoId} className={styles.promoCard}>\n              <h2>{promotion.title}</h2>\n                <div className={styles.promoBadgeContainer}>\n                  {\n                    promotion.types.map(promoType=>(\n                      <div key={promoType} className={styles.promoBadge}>\n                        {promoType}\n                      </div>\n                    ))\n                  }\n                </div>\n                <div className={styles.promoDescription}>{promotion.description}</div>\n                <div className={styles.promoPartner}>By {promotion.partners}</div>\n                <div>From {moment(promotion.start).format('DD/MM/YYYY HH:mm:ss')}</div>\n                <div>To {moment(promotion.end).format('DD/MM/YYYY HH:mm:ss')}</div>\n                <div className={styles.promoRedeemContainer}>\n                  <button className={styles.promoRedeem} onClick={() => handleClick(promotion.promoId)}>Redeem</button>\n                </div>\n            </div>\n          ))}\n        </div>\n      </main>\n      <footer className={styles.footer}>\n      </footer>\n    </div>\n  );\n  } else {\n    return (\n      <div className={styles.page}>\n      <main className={styles.main}>\n        <div>\n          <h1>No Promotion!!!</h1>\n        </div>\n      </main>\n      </div>\n    )\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}